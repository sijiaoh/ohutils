version: '3'

services:
  https-portal:
    image: steveltn/https-portal:latest
    ports:
      - '80:80'
      - '443:443'
    extra_hosts:
      - 'host.docker.internal:host-gateway'
    environment:
      DOMAINS: 'ohutils.com -> http://host.docker.internal:3000'
      STAGE: '${HTTPS_PORTAL_STAGE}'
      ERROR_LOG: default
      ACCESS_LOG: default
    volumes:
      - https-portal-data:/var/lib/https-portal
      - /path/to/log/directory:/var/log/nginx/
      - /path/to/logrotate/state/directory:/var/lib/logrotate/

volumes:
  https-portal-data:
